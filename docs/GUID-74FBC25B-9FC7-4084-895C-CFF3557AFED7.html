<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE11" /><meta name="copyright" content="(C) Copyright 2023" />
<meta name="DC.rights.owner" content="(C) Copyright 2023" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="topic" />
<meta name="DC.title" content="OTA Boot Loader" />
<meta name="DC.relation" scheme="URI" content="GUID-60AE2339-6045-4BAA-AEBC-AAEE24D8C566.html" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="ota-boot-loader" />
<link rel="stylesheet" type="text/css" href="stylesheets/atmel.css" />
<title>OTA Boot Loader</title>
<meta name="Microsoft.Help.Id" content="GUID-6863E711-3A96-49BC-B369-8645955ECCD6-ota-boot-loader" />
<meta name="Microsoft.Help.TocParent" content="GUID-6863E711-3A96-49BC-B369-8645955ECCD6" />
<meta name="Microsoft.Help.TocOrder" content="0" />
<meta name="Microsoft.Help.Locale" content="en-US" />
<meta name="Microsoft.Help.TopicLocale" content="en-US" />
<meta name="Microsoft.Help.DisplayVersion" content="MPLAB Harmony Wireless application examples for PIC32MZ W1 family Reference A 10/2023" />
<script language="javascript">
       
       if (window.parent.location.protocol != 'file:') {
				document.addEventListener('click', function(e) {
				    if (e.target) {
               if (e.target.nodeName == "A" ) {
                    if (!e.target.target) {
                      e.preventDefault();
                      e.stopPropagation();
                              
                      var origUrl = window.parent.location.href.substr(0, window.parent.location.href.indexOf("?"));
                      if (origUrl.length === 0) {
                          origUrl = window.parent.location.href;
                      }
                      var href= e.target.getAttribute("href");
                      var parts = href.split("#");
          
                      var url = "";
                      if (parts.length == 2 ) {
                        if (!parts[0].length) {
                            url = window.parent.location.search.replace('?','')
                        } else {
                            url = parts[0].replace('.html','');
                        }
                      } else {
                        url = parts[0].replace('.html','');
                      }

                      if (parts.length == 2) {
                          url += "#" + parts[1];
                      }
    
                      window.parent.location.href = origUrl + "?" + url;

                      return false;
                    }
               }
            }
				});
			}

		</script><script language="javascript">
         
         function copyContent(content, button) {
         
            var textArea = document.createElement("textarea");
            
            // Place in the top-left corner of screen regardless of scroll position.
            textArea.style.position = 'fixed';
            textArea.style.top = 0;
            textArea.style.left = 0;
            
            // Ensure it has a small width and height. Setting to 1px / 1em
            // doesn't work as this gives a negative w/h on some browsers.
            textArea.style.width = '2em';
            textArea.style.height = '2em';
            
            // We don't need padding, reducing the size if it does flash render.
            textArea.style.padding = 0;
            
            // Clean up any borders.
            textArea.style.border = 'none';
            textArea.style.outline = 'none';
            textArea.style.boxShadow = 'none';
            
            // Avoid flash of the white box if rendered for any reason.
            textArea.style.background = 'transparent';
            
            textArea.value = content;
            
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
               var successful = document.execCommand('copy');
               var msg = successful ? 'successful' : 'unsuccessful';
               if (!button.classList.contains("copied")){
                  button.textContent = "Copied";
                  button.classList.add("copied");
                  setTimeout(function(){
                     button.textContent = "Copy";
                     button.classList.remove("copied");
                  },1000);
               }
            } catch (err) {
               console.log('Oops, unable to copy');
            }
            
            document.body.removeChild(textArea);
         }
         
         function cpy(id, button) {
            var element = document.getElementById(id);
            var content = element.getAttribute("content");
            
            copyContent(content, button);
         }
         
         document.addEventListener("DOMContentLoaded", function(event) {
            document.querySelectorAll(".codeblock").forEach(function(elem) {
               elem.style.position = "relative";
               var copy = document.createElement("button");
               copy.textContent = "Copy";
               copy.setAttribute("class", "copy-code");
               
               var content = elem.textContent;
               
               copy.addEventListener("click", function(){
                  copyContent(content, copy);
               });
               
               elem.addEventListener("mouseenter", function(evt){
                  elem.prepend(copy);
               });
            });
            
            document.querySelectorAll(".codeblock").forEach(function(elem) {
               elem.addEventListener("mouseleave", function(evt){
                  document.querySelector(".copy-code").remove();
               });
            });
         });
         
      </script><script language="javascript">
          
          // Add the MathML namespace to html
          var html = document.getElementsByTagName("html")[0],
          head = document.getElementsByTagName("head")[0];
          
          var mathJax = document.createElement("script");
          mathJax.src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML";
          head.appendChild(mathJax);
          
          html.setAttribute("xmlns:m","http://www.w3.org/1998/Math/MathML");
          
          function inIframe() { try { return window.self !== window.top; } catch (e) { return true; } }
          
          if (!inIframe()) { 
          
          var Default = "index.html?GUID-74FBC25B-9FC7-4084-895C-CFF3557AFED7"; 
          
          var displaylocation = "value" + window.location.href;
          
          var GUIDS = displaylocation.split('GUID');          
          
          if (displaylocation.indexOf('#GUID') != -1) {            
          var First = GUIDS[1].split('.html');  
          if (GUIDS[3]){First = GUIDS[2].split('.html');}
          if (GUIDS[4]){First = GUIDS[3].split('.html');}
          if (GUIDS[5]){First = GUIDS[4].split('.html');}
          
          var Second = GUIDS[2].split('#');   
          if (GUIDS[3]){Second = GUIDS[3].split('#');}
          if (GUIDS[4]){Second = GUIDS[4].split('#');}
          if (GUIDS[5]){Second = GUIDS[5].split('#');}
          
          Default = "index.html?" + "GUID" + First[0] + "GUID" + Second[0];     
          }                    
          window.top.location = Default;
          }       
          
        </script><link rel="stylesheet" type="text/css" href="syntax-highlight.css" /><style xml:space="">
        
          button.copy-code{
            display:none;
            padding:0.7em 1.4em;
            margin:0 0.3em 0.3em 0;
            border-radius:0.15em;
            box-sizing: border-box;
            text-decoration:none;
            font-family:'Roboto',sans-serif;
            text-transform:uppercase;
            font-weight:400;
            color:#FFFFFF;
            background-color:#9c9c9c;
            box-shadow:inset 0 -0.6em 0 -0.35em rgba(0,0,0,0.17);
            text-align:center;
            position:relative;
            border: 0;
            float: right;
            border-radius: .5em;
            cursor: pointer;
          }
          button.copy-code:active{
            top:0.1em;
          }
          
          pre:hover button.copy-code{
            display: inline-block !important;
          }
          button.copy-code.copied {
            cursor: default !important;
          }
          
          
          @media all and (max-width:30em){
            button.copy-code{
              display:block;
              margin:0.4em auto;
            }
          }
        
        
      </style><link rel="stylesheet" type="text/css" href="syntax-highlight.css" /></head>
<body id="ota-boot-loader">
<h1 class="title topictitle1" id="ariaid-title1" style="">OTA Boot Loader</h1><div class="body"><p class="p">This example acts as loader of OTA image (downloaded using OTA process) to load it to device memory .</p>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="GUID-60AE2339-6045-4BAA-AEBC-AAEE24D8C566.html">Harmony 3 Wireless application examples for PIC32MZ W1 family</a></div>
</div>
</div><div class="topic nested1" aria-labelledby="ariaid-title2" id="description"><h2 class="title topictitle2" id="ariaid-title2" style="">Description</h2><div class="body"><p class="p">This bootloader project can be used by user to program an image , which is downloaded through OTA process. It is required to build this project first using its IDE (MPLABX) before building OTA application, as the image of the bootloader will be integrated with the "wifi_ota_app_upgrade" application image.</p>
<p class="p">During boot-up, bootloader will check if any new valid image available in the external flash. If available, it chooses the newly (latest downloaded) available image in the External flash (sst26vf) and program it to Program-Flash area of the device. Bootloader uses SPI protocol to program the image from the external flash.</p>
<p class="p">If there is no new downloaded image present in the external flash, bootloader will handover the control to current application present in the program-flash area and application will start executing.</p>
<p class="p"><strong class="ph b">For more details , Please follow documentation provided for Over The Air (OTA) firmware update System Service</strong></p>
</div>
</div>
<div class="topic nested1" aria-labelledby="ariaid-title3" id="securing-ota-by-verifying-images-in-bootloader"><h2 class="title topictitle2" id="ariaid-title3" style="">Securing OTA by verifying Images in Bootloader</h2><div class="body"><p class="p">We have implemented 2 configurations of OTA Bootloader to perform signature verification of images:</p>
<ol class="ol"><li class="li"><span class="indent-level-default">1.</span><p class="p"><strong class="ph b">In software using Wolfcrypt (ota_booloader_wolfcrypt.x)</strong></p>
<ul class="ul"><li class="li with-image"><p class="p">This configuration uses <code class="ph codeph">wolfcrypt</code> library, to verify siganture of image.</p>
<br /><img class="image" src="GUID-372868FA-B3F9-464A-99C8-123DA4FA8113-low.png" alt="wolfcrypt" /><br /></li>
<li class="li with-image"><p class="p">User need to provide public key in the form of array in <code class="ph codeph">pub_key.h</code> file. Array holds the <code class="ph codeph">DER</code> encoded public key. The name of the array should be <code class="ph codeph">pubKey[]</code>.</p>
<br /><img class="image" src="GUID-A66A5B29-D08E-4628-A397-9866EC323194-low.png" alt="pub_key_array_resized" /><br /></li>
<li class="li"><p class="p">For development and testing user may use <code class="ph codeph">key2heder.py</code> python file present in <code class="ph codeph">tools</code> folder of bootloader project. User follow below steps:</p>
<ul class="ul"><li class="li"><p class="p">Copy the <code class="ph codeph">key2heder.py</code> file and file containing public key to a particular folder.</p>
</li>
<li class="li"><p class="p">Use below command from command prompt:
<code class="ph codeph">python key2header.py [file containing public key]</code></p>
<p class="p">e.g. : python key2header.py ECC_prime256v1.pub</p>
</li>
<li class="li"><p class="p"><code class="ph codeph">key_header.h</code> file will be created in the folder. This file contains an array.</p>
</li>
<li class="li"><p class="p">Copy this array and paste it in <code class="ph codeph">pub_key.h</code></p>
</li>
</ul>
</li>
</ul>
</li>
<li class="li"><span class="indent-level-default">2.</span><p class="p"><strong class="ph b">In Hardware using Trust Flex device (ota_booloader_trustflex.x)</strong></p>
<ul class="ul"><li class="li"><p class="p">This configuration requires <code class="ph codeph">trustflex</code> device for signature verification. For provisioning of trust flex device and other hardware details please follow <code class="ph codeph">Provisioning TrustFlex parts for OTA FW Verification</code> below.</p>
</li>
<li class="li with-image"><p class="p">In MHC, <code class="ph codeph">ATECC608</code> component is configured for signature verification.</p>
<br /><img class="image" src="GUID-7A952D0E-CAFF-49D5-A6C0-46BE28F8B994-low.png" alt="ATECC608" /><br /></li>
</ul>
</li>
</ol>
</div>
</div>
<div class="topic nested1" aria-labelledby="ariaid-title4" id="provisioning-trustflex-parts-for-ota-fw-verification"><h2 class="title topictitle2" id="ariaid-title4" style="">Provisioning TrustFlex parts for OTA FW Verification</h2><div class="body"><p class="p">ATECC608 based Trustflex can be used to perform secure firmware verification. The steps to provision it using TPDS2 is documented here.</p>
<ol class="ol"><li class="li"><span class="indent-level-default">1.</span><p class="p">Setup TPDS V2</p>
<p class="p">Setup TPDSV2 following the steps at https://microchipdeveloper.com/authentication:trust-platform-v2</p>
<p class="p">Make sure that you update TPDS after installation.</p>
</li>
<li class="li"><span class="indent-level-default">2.</span><p class="p">Hardware Setup</p>
<ul class="ul"><li class="li"><p class="p">Plug in the DT100104 click board into the microbus interface.</p>
</li>
<li class="li with-image"><p class="p">Make sure that you flip all DIP switches other than SW1:2 in click board to OFF position. This will configure the board to expose the TrustFlex device over the I2C Bus.</p>
<br /><img class="image" src="GUID-3F7F44D8-6B2C-4E4B-BA93-A489EF0735C8-low.png" alt="trust_flex_image1" /><br /></li>
</ul>
</li>
<li class="li"><span class="indent-level-default">3.</span><p class="p">Device Firmware</p>
<p class="p">TPDS talks to the trust elements using the KitProtocol. So, before using TPDS to provision TrustFlex with the PIC32MZW1 device , we need to flash the <a class="xref" href="https://github.com/MicrochipTech/PIC32MZW1_Projects/tree/main/pic32mzw1_kitprotocol" target="_blank">KitProtocol firmware</a> into the dev-board.</p>
<ul class="ul"><li class="li"><p class="p">To update the kit-protocol firmware to use I2C1 instead of the default I2C2 (connected to the onboard TnG module), change HAL_I2C_I2C2 defined in hal_i2c_harmony.h file of the kit protocol project to HAL_I2C_I2C1.</p>
</li>
<li class="li with-image"><p class="p">When the firmware boots-up, the UART console (15008N1) will display the devices detected.</p>
<br /><img class="image" src="GUID-F930392E-306C-44E3-B8E5-2902320382CF-low.png" alt="trust_flex_image2" /><br /><br /><img class="image" src="GUID-28D24819-347C-43B2-81D0-640327534D58-low.png" alt="trust_flex_image3" /><br /></li>
</ul>
</li>
<li class="li"><span class="indent-level-default">4.</span><p class="p">Loading the Public Key for FW verification (Provisioning)</p>
<ul class="ul"><li class="li with-image"><p class="p">Open TPDS  and select ATECC608-TFXTLS configurator under the "Configurators" Tab.</p>
<br /><img class="image" src="GUID-B6CA860A-97E8-445E-9386-768C29E71DB9-low.png" alt="SelectTrustFlexConfigurator" /><br /></li>
<li class="li with-image"><p class="p">Select the Firmware Validation (Secure Boot) usecase from the next screen</p>
<br /><img class="image" src="GUID-50BD1C0B-B8AC-47CC-822A-2F88C8EADE05-low.png" alt="trust_flex_image5" /><br /></li>
<li class="li with-image"><p class="p">Load the public key into Slot 15</p>
<br /><img class="image" src="GUID-2C9F428B-FAF7-4CA3-A9BB-51909E4A0519-low.png" alt="trust_flex_image6" /><br /></li>
<li class="li"><p class="p">Generate a provisioning package and use it to provision the sample.</p>
<ul class="ul"><li class="li"><p class="p">The attached kit with the trustFlex device mounted on it will be automatically detected and provisioned.
<img class="image" src="GUID-2F66428B-B8C9-4F39-AEA5-FE343BF63FEE-low.png" alt="trust_flex_image7" /><br />
<img class="image" src="GUID-7237F582-F85B-41C0-9EE0-9FCD0D5ACCB8-low.png" alt="trust_flex_image8" /><br /></p>
</li>
</ul>
</li>
</ul>
</li>
<li class="li"><span class="indent-level-default">5.</span><p class="p">You can now use the device to verify image signatures in the bootloader.</p>
</li>
</ol>
</div>
</div>
<div class="topic nested1" aria-labelledby="ariaid-title5" id="enabling-secure-ota"><h2 class="title topictitle2" id="ariaid-title5" style="">Enabling Secure OTA</h2><div class="body"><p class="p">By default, <code class="ph codeph">secure ota</code> option will be disabled. To enable it , user need to follow below steps.</p>
<ol class="ol"><li class="li"><span class="indent-level-default">1.</span><p class="p">Enable <code class="ph codeph">Secure OTA Functionality</code> as described in <code class="ph codeph">configure Advances Configuration</code> section of <a class="xref" href="https://github.com/Microchip-MPLAB-Harmony/wireless_system_pic32mzw1_wfi32e01/blob/master/system/ota/docs/configuration.md" target="_blank">link</a>.</p>
</li>
<li class="li"><span class="indent-level-default">2.</span><p class="p">Define "SYS_OTA_SECURE_BOOT_ENABLED" in "bootloader.h" of bootloader project. User can simply uncomment line of code in "bootloader.h" as shown in below image :
<img class="image" src="GUID-64E3542B-D374-42B0-97FF-CF5992F28496-low.png" alt="define_secure_boot" /><br /></p>
</li>
<li class="li"><span class="indent-level-default">3.</span><p class="p">Follow steps describe in <code class="ph codeph">Required steps for Secure-ota</code> of this document.</p>
</li>
</ol>
</div>
</div>
<div class="topic nested1" aria-labelledby="ariaid-title6" id="generating-signature"><h2 class="title topictitle2" id="ariaid-title6" style="">Generating Signature</h2><div class="body"><p class="p">For generating signature please refer <code class="ph codeph">Generating Signature</code> section of <a class="xref" href="https://github.com/Microchip-MPLAB-Harmony/wireless_system_pic32mzw1_wfi32e01/blob/master/system/ota/docs/usage.md" target="_blank">usage</a> manual, which is part of <code class="ph codeph">ota</code> system component.</p>
</div>
</div>
<div class="topic nested1" aria-labelledby="ariaid-title7" id="required-steps-for-secure-ota"><h2 class="title topictitle2" id="ariaid-title7" style="">Required steps for Secure-ota</h2><div class="body"><ol class="ol"><li class="li"><span class="indent-level-default">1.</span><p class="p">Generate <code class="ph codeph">private key</code> using command
<code class="ph codeph">openssl ecparam -genkey -name prime256v1 -noout -out ECC_prime256v1.key</code></p>
</li>
<li class="li"><span class="indent-level-default">2.</span><p class="p">Generate <code class="ph codeph">public key</code> using command
<code class="ph codeph">openssl.exe ec -in ECC_prime256v1.key -pubout -out ECC_prime256v1.pub</code></p>
</li>
<li class="li"><span class="indent-level-default">3.</span><p class="p">In case of <code class="ph codeph">ota_booloader_wolfcrypt.x</code>, public key should be provided in <code class="ph codeph">pub_key.h</code> header file , as described above in <code class="ph codeph">Securing OTA by verifying Images in Bootloader</code> section.</p>
<p class="p">In case of <code class="ph codeph">ota_booloader_trustflex.x</code>, please follow <code class="ph codeph">Provisioning TrustFlex parts for OTA FW Verification</code> as described above.</p>
</li>
<li class="li"><span class="indent-level-default">4.</span><p class="p">User need to store signature of <code class="ph codeph">Factory image</code> into system (External flash). This step should be done after factory image is programmed into device and application is running. This is one time job. Please follow steps provided in <code class="ph codeph">Verification of factory image</code> section of <a class="xref" href="https://github.com/Microchip-MPLAB-Harmony/wireless_system_pic32mzw1_wfi32e01/blob/master/system/ota/docs/usage.md" target="_blank">usage</a> manual, which is part of <code class="ph codeph">ota</code> system component.</p>
</li>
<li class="li"><span class="indent-level-default">5.</span><p class="p">Create <code class="ph codeph">OTA image</code> following <code class="ph codeph">Generating the OTA image</code> section of <a class="xref" href="https://github.com/Microchip-MPLAB-Harmony/wireless_system_pic32mzw1_wfi32e01/blob/master/system/ota/docs/usage.md" target="_blank">usage</a> manual, which is part of <code class="ph codeph">ota</code> system component.</p>
</li>
<li class="li"><span class="indent-level-default">6.</span><p class="p">Generate <code class="ph codeph">signature</code> of <code class="ph codeph">OTA</code> images using private key, as described above in <code class="ph codeph">Generating Signature</code> of this document.</p>
</li>
<li class="li"><span class="indent-level-default">7.</span><p class="p">User need to mention <code class="ph codeph">signature</code> in Manifest file, please follow <code class="ph codeph">OTA server JSON manifest</code> section of <a class="xref" href="https://github.com/Microchip-MPLAB-Harmony/wireless_system_pic32mzw1_wfi32e01/blob/master/system/ota/docs/usage.md" target="_blank">usage</a> manual, which is part of <code class="ph codeph">ota</code> system component.</p>
</li>
</ol>
</div>
</div>
<div class="topic nested1" aria-labelledby="ariaid-title8" id="using-bootloader-for-non-secure-ota"><h2 class="title topictitle2" id="ariaid-title8" style="">Using bootloader for Non-secure OTA</h2><div class="body"><p class="p">User need to undefine macro <code class="ph codeph">SYS_OTA_SECURE_BOOT_ENABLED</code> in "bootloader.h" of bootloader project to disable <code class="ph codeph">Signature</code> verfication of images. In this case, only <code class="ph codeph">Digest</code> verification will be done by bootloader.</p>
<br /><img class="image" src="GUID-64E3542B-D374-42B0-97FF-CF5992F28496-low.png" alt="define_secure_boot" /><br /></div>
</div>
<div class="topic nested1" aria-labelledby="ariaid-title9" id="disabling-file-system-in-bootloader-code"><h2 class="title topictitle2" id="ariaid-title9" style="">Disabling File system in Bootloader code</h2><div class="body"><p class="p">The File system can be disbaled only in the bootloader, <code class="ph codeph">ota_booloader_wolfcrypt.x</code>. User can disable the File System by undefining the macro <code class="ph codeph">SYS_OTA_FS_ENABLED</code> in <code class="ph codeph">bootloader.h</code>.
Also user can enbale the feature, jumping to the start address of the new image downloaded via file downloader, by enabling the macro <code class="ph codeph">SYS_OTA_FILE_JUMP_ENABLE</code> in  <code class="ph codeph">bootloader.h</code>. Update the jump address of the new image <code class="ph codeph">APP_IMG_BOOT_ADDR_2</code> in <code class="ph codeph">ota_config.h</code> file .This feature is available only with <code class="ph codeph">ota_booloader_wolfcrypt.x</code>.</p>
<br /><img class="image" src="GUID-663D3C8C-BDA0-4A91-BA23-EBD49216AFEE-low.png" alt="ota_bootloader_fs_macro" /><br /></div>
</div>
<div class="topic nested1" aria-labelledby="ariaid-title10" id="downloading-and-generating-bootloader-code"><h2 class="title topictitle2" id="ariaid-title10" style="">Downloading and Generating Bootloader Code</h2><div class="body"><p class="p">To download or clone this application from Github, go to the <a class="xref" href="https://github.com/Microchip-MPLAB-Harmony/wireless_apps_pic32mzw1_wfi32e01" target="_blank">top level of the repository</a></p>
<p class="p">Path of the project within the repository is <strong class="ph b">apps/ota_bootloader/firmware</strong>.</p>
<p class="p">To genearte code, refer to the following table and open the project using its IDE.</p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all"><col style="width:" /><col style="width:" /><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder" style="vertical-align:middle;" id="d9173e439"><span>Project Name</span></th>
<th class="entry cellrowborder" style="vertical-align:middle;" id="d9173e441"><span>Description</span></th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d9173e439 "><span>ota_booloader_trustflex.x</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d9173e441 "><span>MPLABX project for PIC32MZ W1 Curiosity Board using trustflex click board</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d9173e439 "><span>ota_booloader_wolfcrypt.x</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d9173e441 "><span>MPLABX project for PIC32MZ W1 Curiosity Board using wolfcrypt library</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" colspan="2" style="vertical-align:middle;" headers="d9173e439 d9173e441 "><span> </span></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="topic nested1" aria-labelledby="ariaid-title11" id="setting-up-pic32mz-w1-curiosity-board"><h2 class="title topictitle2" id="ariaid-title11" style="">Setting up PIC32MZ W1 Curiosity Board</h2><div class="body"><ul class="ul"><li class="li"><p class="p">Connect the Debug USB port on the board to the computer using a micro USB cable</p>
</li>
</ul>
</div>
</div>
<div class="topic nested1" aria-labelledby="ariaid-title12" id="generating-bootloader-code"><h2 class="title topictitle2" id="ariaid-title12" style="">Generating BootLoader Code</h2><div class="body"><ol class="ol"><li class="li"><span class="indent-level-default">1.</span><p class="p">Open "ota_bootloader" project and launch Harmony3 configurator. Path of the application within the repository is <strong class="ph b">apps/ota_bootloader/firmware</strong>.</p>
</li>
<li class="li"><span class="indent-level-default">2.</span><p class="p">In case , <code class="ph codeph">ota_booloader_wolfcrypt.x</code> to be used, provide public key in <code class="ph codeph">pub_key.h</code> file, as described above. This step is not required , in case customer wants to use <code class="ph codeph">ota_booloader_trustflex.x</code>.</p>
</li>
<li class="li"><span class="indent-level-default">3.</span><p class="p">By Default , Secure OTA (verifying signture in bootloader) is disabled. To enable it please follow <code class="ph codeph">Enabling Secure OTA</code> section as described above.</p>
</li>
<li class="li"><span class="indent-level-default">4.</span><p class="p">Compile the project using MPLABX</p>
</li>
</ol>
</div>
</div>
</body>
</html>