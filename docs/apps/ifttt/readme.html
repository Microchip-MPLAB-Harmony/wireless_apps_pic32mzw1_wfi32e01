<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="shortcut icon" href="../../favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="../../assets/css/just-the-docs-default.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-2724382-16"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-2724382-16'); </script> <script type="text/javascript" src="../../assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="../../assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>IFTTT Demo | Harmony 3 Wireles application examples for PIC32MZ W1 family</title> <meta name="generator" content="Jekyll v3.9.0" /> <meta property="og:title" content="IFTTT Demo" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Harmony 3 Wireless application examples for PIC32MZ W1 family" /> <meta property="og:description" content="Harmony 3 Wireless application examples for PIC32MZ W1 family" /> <link rel="canonical" href="../../apps/ifttt/readme.html" /> <meta property="og:url" content="../../apps/ifttt/readme.html" /> <meta property="og:site_name" content="Harmony 3 Wireles application examples for PIC32MZ W1 family" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="IFTTT Demo" /> <script type="application/ld+json"> {"@type":"WebPage","url":"../../apps/ifttt/readme.html","headline":"IFTTT Demo","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"../../assets/images/vendor/microchip_mplab_harmony_logo_150_transparent.png"}},"description":"Harmony 3 Wireless application examples for PIC32MZ W1 family","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="../../index.html" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../index.html" class="nav-list-link">Harmony 3 Wireless application examples for PIC32MZ W1 family</a><ul class="nav-list "><li class="nav-list-item active"><a href="../../apps/ifttt/readme.html" class="nav-list-link active">IFTTT Demo</a></li><li class="nav-list-item "><a href="../../apps/ota_bootloader/readme.html" class="nav-list-link">OTA Boot Loader</a></li><li class="nav-list-item "><a href="../../apps/wifi_ota_app_upgrade/readme.html" class="nav-list-link">Over The Air (OTA) Upgrade Using Wi-Fi</a></li><li class="nav-list-item "><a href="../../apps/paho_mqtt_client/readme.html" class="nav-list-link">Paho MQTT Client</a></li><li class="nav-list-item "><a href="../../apps/paho_mqtt_client_power_save/readme.html" class="nav-list-link">Paho MQTT Client Power Save</a></li><li class="nav-list-item "><a href="../../apps/paho_mqtt_tls_client/readme.html" class="nav-list-link">Paho MQTT TLS Client</a></li><li class="nav-list-item "><a href="../../apps/tcp_client/readme.html" class="nav-list-link">Secured TCP Client</a></li><li class="nav-list-item "><a href="../../apps/tcp_server/readme.html" class="nav-list-link">TCP Server</a></li><li class="nav-list-item "><a href="../../apps/udp_client/readme.html" class="nav-list-link">UDP Client</a></li><li class="nav-list-item "><a href="../../apps/udp_server/readme.html" class="nav-list-link">UDP Server</a></li><li class="nav-list-item "><a href="../../apps/weather_client/readme.html" class="nav-list-link">Weather Client</a></li><li class="nav-list-item "><a href="../../apps/web_socket_server/readme.html" class="nav-list-link">Web Socket Server</a></li><li class="nav-list-item "><a href="../../apps/wifi_easy_config/readme.html" class="nav-list-link">Wi-Fi Easy Configuration</a></li><li class="nav-list-item "><a href="../../apps/wifi_sta/config_driver_readme.html" class="nav-list-link">Wi-Fi STA (driver mode)</a></li><li class="nav-list-item "><a href="../../apps/wifi_sta/readme.html" class="nav-list-link">Wi-Fi STA (service mode)</a></li><li class="nav-list-item "><a href="../../apps/wifi_ap/readme.html" class="nav-list-link">Wi-Fi Soft AP (Service mode)</a></li><li class="nav-list-item "><a href="../../apps/wifi_ap/config_driver_readme.html" class="nav-list-link">Wi-Fi Soft AP (driver mode)</a></li><li class="nav-list-item "><a href="../../apps/wifi_eth_dual_interface/readme.html" class="nav-list-link">Wi-Fi ethernet dual interface</a></li></ul></li><li class="nav-list-item"><a href="../../release_notes.html" class="nav-list-link">Release notes</a></li><li class="nav-list-item"><a href="../../mplab_harmony_license.html" class="nav-list-link">License</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Harmony 3 Wireles application examples for PIC32MZ W1 family" aria-label="Search Harmony 3 Wireles application examples for PIC32MZ W1 family" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://support.microchip.com" class="site-button" > Obtain Support from Microchip </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="../../index.html">Harmony 3 Wireless application examples for PIC32MZ W1 family</a></li> <li class="breadcrumb-nav-list-item"><span>IFTTT Demo</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <p><a href="https://www.microchip.com"><img src="https://www.microchip.com/ResourcePackages/Microchip/assets/dist/images/logo.png" alt="MCHP" /></a></p> <h1 id="ifttt-demo"> <a href="#ifttt-demo" aria-labelledby="ifttt-demo" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> IFTTT Demo </h1> <p>This example application demosntrates how we can generate a trigger to IFTTT web platform to make it perform a specific action like sending a mail/ sms etc using an applet.</p> <h2 id="description"> <a href="#description" aria-labelledby="description" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Description </h2> <p>IFTTT is short for “If This Then That”. IFTTT is a third-party web platform which uses applets for performing specific actions when they are triggered via a connection. This application demonstrates how a user can trigger a pre-existing applet. The application shall come up in STA mode, and will establish a TLS connection with maker.ifttt.com. It shall send a trigger every time the button (SW1) on the Curiosity Board is pressed.</p> <h2 id="downloading-and-building-the-application"> <a href="#downloading-and-building-the-application" aria-labelledby="downloading-and-building-the-application" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Downloading and building the application </h2> <p>To download or clone this application from Github, go to the <a href="https://github.com/Microchip-MPLAB-Harmony/wireless_apps_pic32mzw1_wfi32e01">top level of the repository</a></p> <p>Path of the application within the repository is <strong>apps/ifttt/firmware</strong> .</p> <p>To build the application, refer to the following table and open the project using its IDE.</p> <div class="table-wrapper"><table> <thead> <tr> <th>Project Name</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>pic32mz_w1_curiosity_freertos.X</td> <td>MPLABX project for PIC32MZ W1 Curiosity Board</td> </tr> <tr> <td> </td> <td> </td> </tr> </tbody> </table></div> <h2 id="creating-an-applet-on-ifttt-web-platform"> <a href="#creating-an-applet-on-ifttt-web-platform" aria-labelledby="creating-an-applet-on-ifttt-web-platform" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Creating an Applet on IFTTT web platform. </h2> <p>IFTTT is a third-party web platform, and one can create an applet of their own. More details on how one can use IFTTT and create their own applets can be found at https://help.ifttt.com/hc/en-us/articles/360021401373-Creating-your-own-Applet</p> <h2 id="setting-up-pic32mz-w1-curiosity-board"> <a href="#setting-up-pic32mz-w1-curiosity-board" aria-labelledby="setting-up-pic32mz-w1-curiosity-board" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Setting up PIC32MZ W1 Curiosity Board </h2> <ul> <li>Connect the Debug USB port on the board to the computer using a micro USB cable to power on the board.</li> <li>On the GPIO Header (J207), connect U1RX (PIN 13) and U1TX (PIN 23) to TX and RX pin of any USB to UART converter</li> <li>Home AP (Wi-Fi Access Point with internet connection)</li> </ul> <h2 id="running-the-application"> <a href="#running-the-application" aria-labelledby="running-the-application" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Running the Application </h2> <ol> <li>Open the project and launch Harmony3 configurator.</li> <li> <p>Configure home AP credentials for STA Mode.</p> <p><img src="../../apps/ifttt/images/MHC_SSID_Configuration.png" alt="MHC" /></p> </li> <li>Save configurations and generate code via MHC.</li> <li> <p>Currently application expects the user to create an applet at the IFTTT web platform and configure the relevant details related to the applet in the app.c file. These details will help in creating the trigger which we send to make the applet perform the action.</p> </li> <li>The user would need to populate the following</li> </ol> <div class="table-wrapper"><table> <thead> <tr> <th>Parameter Name</th> <th>Default Value</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>IFTTT_EVENT_TYPE</td> <td>IFTTT_EVENT<br />_BUTTON_PRESS</td> <td>The IFTTT applet can be triggered in two ways via this application - by pressing the button on the board (IFTTT_EVENT_BUTTON_PRESS), or by running a timer (IFTTT_EVENT_PERIODIC_TIMER) and sending the trigger periodically. The default event type is button press to trigger the applet.</td> </tr> <tr> <td>IFTTT_EVENT_PERIOIDC<br />_TIMER_TIMEOUT</td> <td>100 sec</td> <td>This parameter is used for setting the timeperiod in sec, after which a periodic trigger will be generated. This is valid only when the IFTTT_EVENT_TYPE has been set to IFTTT_EVENT_PERIODIC_TIMER</td> </tr> <tr> <td>IFTTT_EVENT</td> <td>“YOUR_EVENT”</td> <td>This is a mandatory parameter to be filled in by the user, and is the ‘event’ which triggers the applet. This ‘event’ was used while creating the applet at the IFTTT web platform.</td> </tr> <tr> <td>IFTTT_KEY</td> <td>“YOUR_KEY”</td> <td>This is a mandatory parameter to be filled in by the user, and is the the ‘key’ which is generated after the creation of the applet at the IFTTT web platform.</td> </tr> <tr> <td>IFTTT_NUM_OF_VALUES</td> <td>1</td> <td>The IFTTT applet can use upto 3 values/ data while performing an action. This parameter indicates the number of values which this application needs to send along with the trigger.</td> </tr> <tr> <td>IFTTT_VALUE1</td> <td>“Value1”</td> <td>Data Value1 that needs to be sent along with the trigger.</td> </tr> <tr> <td>IFTTT_VALUE2</td> <td>“Value2”</td> <td>Data Value2 that needs to be sent along with the trigger.</td> </tr> <tr> <td>IFTTT_VALUE3</td> <td>“Value3”</td> <td>Data Value3 that needs to be sent along with the trigger.</td> </tr> <tr> <td>IFTTT_USER_CALLBACK</td> <td>NULL</td> <td>In case users want to process some data and based on the result want to dynamically decide if the trigger needs to be sent or not, they will need to map this parameter to APP_IFTTT_Callback() function and implement the action inside this function. This function is expected to return a true if the trigger needs to be sent, else false based on the processing of the data relevant to the user application. For example the user may be implementing a temperature sensor and would want to poll periodically for the temperature but send in a trigger only when the temperature crosses certain threshold. In such a case, implementing this function accordingly can help achive the above objective. Also, there can be requirement that the user needs to also send in the sensed temperature value with the trigger, which can be populated in the ‘Value1’ and sent.</td> </tr> <tr> <td>IFTTT_USER_CALLBACK_CTX</td> <td>NULL</td> <td>Callback context/ parameter which will be passed on to APP_IFTTT_Callback(). This could a structure pointer which contains the data to be processed and decide if the trigger needs to be sent.</td> </tr> </tbody> </table></div> <ol> <li>Build and program the generated image into the hardware using the IDE.</li> <li>Open the terminal application (Ex.:Tera term) on the computer.</li> <li>Connect to the COM port related to the external USB-UART connected to the GPIO heade and configure the serial settings as follows: <ul> <li>Baud : 115200</li> <li>Data : 8 Bits</li> <li>Parity : None</li> <li>Stop : 1 Bit</li> <li>Flow Control : None</li> </ul> </li> <li> <p>The Board will connect to Home AP.</p> <p><img src="../../apps/ifttt/images/Console_STA_Connected.png" alt="Console" /></p> </li> <li> <p>Every time the button/ switch (SW1) is pressed</p> <p><img src="../../apps/ifttt/images/Curiosity_Board.png" alt="Switch" />,</p> <p>it shall connect to maker.ifttt.com and send the trigger.</p> <p><img src="../../apps/ifttt/images/Console_Trigger_Sent.png" alt="Console" /></p> </li> <li>This Trigger will be received by the ifttt server which will invoke the applet. Let us assume the user created an applet using webhooks which shall ‘send an email’ as an action. The email could look something like this: <img src="../../apps/ifttt/images/Applet_Email.png" alt="Action" /></li> <li>Every time a trigger is being sent by the Curiosity Board, the red LED on the board will be ON, and it will go OFF once the trigger request has been successfully trasmitted to IFTTT server. Any new request while the LED is ON will not be honoured. Hence, it is receommended to press the button for a new request only when the red LED has gone OFF.</li> </ol> <hr> <footer> <p class="text-small text-grey-dk-000 mb-0"><img src='https://raw.githubusercontent.com/wiki/Microchip-MPLAB-Harmony/Microchip-MPLAB-Harmony.github.io/images/microchip_logo.png' /><br />Copyright &copy; 2020 Microchip Technology.</p> <!-- <p class="text-small text-grey-dk-000 mb-0"><img src='../../assets/images/vendor/microchip_logo.png' /><br /> Copyright &copy; 2022 Microchip Technology.</p> --> </footer> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
